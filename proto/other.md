## 遇到问题怎么解决问题，事件绑定，打桩，debug，网络错误代码分析

1. 打印
1. 断点
1. 性能分析
1. chrom Performance
1. 青花瓷抓包
1. 单元测试
1. 测试框架 jest

## 从输入url到页面展示的详细过程

1. 输入网址
    1. 当输入地址时，浏览器会根据关键字，从历史记录，书签等地方，找到可能对应的url，并给予用户提示。
        1. 对于 Chrome 浏览器，它甚至会把页面从缓存中展示出来。
        1. 缓存放在 用户的appdata中
    1. 用户发起请求
2. 浏览器查找域名的IP地址
    1. 请求发起后，浏览器首先解析这个域名，先查看本地的hosts文件，若其中有该域名的对应规则，则直接使用hosts中的ip地址。
    1. 若没在host文件中找到，则会发出一个DNS请求到本地DNS服务器。本地DNS服务器一般都是你的网络接入服务商提供。
    3. 当输入的url的DNS请求到达本地DNS之后，服务会首先查询它的缓存记录，如果缓存中有此条记录，就直接返回结果（递归方式查询）。若没有，本地DNS还要向根DNS进行查询。
    4. 根DNS没有记录具体的域名和IP地址的对应关系，而是告诉本地DNS, 去域服务器上继续查询，并给出域服务器的地址。这种过程是迭代的过程。
    5. 向域服务器请求后，（.com域，.cn域等），告诉本地DNS，输入的url（域名）的解析服务器的地址。
    6. 最后本地DNS向域名的解析服务器发出请求，对方返回和域名对应的IP地址，本地DNS不仅要把IP地址返回给用户电脑，还要将域名（url）和 IP 之间的关系缓存，以加快下次访问。
        1. DNS
            1. DNS 因特网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。
                1. DNS 类似通讯录，备注是域名，电话是IP。
        1. DNS 查询方式 递归（一查到底，返回正确IP） 迭代 （查到下一层DNS，就返回，让客户端继续查）
        1. DNS 负载均衡
            1. 当用户足够多时，每次请求的资源都位于同一台机器上会很容易崩坏。
            1. 负载均衡技术，在DNS服务器中为同一个主机名配置多个ip地址，在应答时，将ip地址按顺序返回，将客户端引导到不同的机器上去，从而达到负载均衡的目的。
                1. 或根据 负载量 用地理位置 等。
3. 浏览器向 web 服务器发送一个 HTTP 请求
    1. 有IP之后，浏览器会以一个随机端口，向向对方服务器（nginx等）的80端口发起TCP的连接请求。
    1. 此请求通过路由设备到达服务器端后，进入到网卡，进入到其内核的TCP/IP协议栈（用于识别该连接请求，解封包，一层层剥开），还有可能经过防火墙的过滤，最终到达web程序，最终建立起 TCP（卡车）/IP（马路） 的连接。
    1. 建立连接后，发起一个http（货物）请求。一般会包含3个部分：
        1. 请求方法、URL、协议、版本
        1. 请求头
        1. 请求正文
    1. 三次握手
        1. 客户端给服务端发起 SYN=1，seq=j（j为数字）数据包，进入 SYN_SENT 状态，等待服务端确认。
        1. 服务端收到包后，发回 SYN=1，ACK=1，ack=j+1，seq=K，进入 SYN_RCVD 状态。
        1. 客户端收到包后，检查 ack 是否为 j+1, ACK 是否为 1，若正确则发回 ACK=1 ack=k+1 的包。服务器检查 ack 是否为 k+1，若正确则连接建立成功，客户端和服务器都进入ESTABLISHED，完成三次握手，可以开始传输数据了。
            1. 为什么需要 3次握手？ 为了防止已失效的连接请求报文段突然又传送到了服务端。
    1. 四次挥手
        1. 客户端发送 FIN 包，告知服务器要关闭连接。
        1. 服务器收到后发送一个 ACK 包，给客户端，告诉你我收到了。
        1. 服务器发送一个FIN包，告知客户端要关闭连接。
        1. 客户端收到后发送一个 ACK 包，给服务器，告诉你我收到了。双方关闭连接
            1 为什么需要 4次挥手？ 关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，己方也未必全部数据都发送给对方了，所以己方可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送。
4. 服务器的永久重定向响应
    1. 服务器给浏览器响应一个301永久重定向响应，此时浏览器会访问 www.com , 而非 .com 。
    1. 为什么不直接发送用户想要的网页内容呢？
        1. 搜索引擎认为 www.com .com 为两个网址，会降低搜索排名，但它能识别301，则会只记录 www.com ,从而提升排名。
        1. 若一个页面有好几个名字时，它可能会在缓存里出现好几次。
    1. 301 和 302
        1. 都表示重定向，这个地址都可以从响应的 location 中获取。
        1. 301 表示访问的地址已经被永久移除了。302 表示我希望你跳，但是你仍然可以访问该地址。 SEO302好于301。
    1. 重定向原因：
        1. 网站调整。
        1. 网页被转移。
        1. 网页扩展名变更。
    1. 为什么要做重定向
        1. 有以上原因，若不做重定向，则用户收藏、搜索引擎中旧地址，就只能让访问客户得到一个404页面。
        1. 注册了多个域名，也需要通过重定向让访问这些域名的用户自动跳转到主站点。
5. 浏览器跟踪重定向地址————从响应的 location 中获取了url，则发起另一个http请求。
6. 服务器处理请求
    1. 后端从固定的端口接收到TCP报文开始，对TCP连接进行处理，对HTTP协议进行解析，并按照报文格式进一步封装成 HTTP request 对象，供上次使用。
    1. 大一点的网站会将请求到反向代理服务器中，此时不是直接通过HTTP协议访问某些网站应用服务器，而是先请求到 nginx ， nginx 再请求其他分布式应用服务器，顺便做个负载均衡。
        1. 分布式好处是，其中一个服务器挂了也不会影响用户使用。
7. 服务器返回一个 HTTP 响应

## HTTP状态码

1. 1** 信息，服务器收到请求，需要请求者继续执行操作
    1. 100 continue 继续。客户端应继续其请求。
    1. 101 switching Protocols 切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议
1. 2** 成功，操作被成功接收并处理
    1. 200 OK 请求成功。一般用于GET与POST请求
    1. 201 Create 已创建。成功请求并创建了新的资源
    1. 202 Accepted 已接收。已经接收请求，但未处理完成
    1. 203 Non-auth 非授权信息。请求成功，单反毁的meta信息不在原始的服务器，而是一个副本。
    1. 204 No content 无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档。
    1. 

## 宏任务 和 微任务